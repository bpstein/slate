
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Staple Invoice Data Extraction REST API</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .cd {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .nl {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
  </head>

  <body class="index" data-languages="[&quot;shell&quot;,&quot;python&quot;,&quot;javascript&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" alt="Navbar" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="images/logo.png" class="logo" alt="Logo" />
        <div class="lang-selector">
              <a href="#" data-language-name="shell">shell</a>
              <a href="#" data-language-name="python">python</a>
              <a href="#" data-language-name="javascript">javascript</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <ul id="toc" class="toc-list-h1">
          <li>
            <a href="#introduction" class="toc-h1 toc-link" data-title="Introduction">Introduction</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#what-is-this-api-for" class="toc-h2 toc-link" data-title="What is this API for?">What is this API for?</a>
                  </li>
                  <li>
                    <a href="#free-demo" class="toc-h2 toc-link" data-title="Free Demo">Free Demo</a>
                  </li>
                  <li>
                    <a href="#in-the-future" class="toc-h2 toc-link" data-title="In the future">In the future</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#usage" class="toc-h1 toc-link" data-title="Usage">Usage</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#python-examples-for-api-usage" class="toc-h2 toc-link" data-title="Python Examples for API usage">Python Examples for API usage</a>
                  </li>
                  <li>
                    <a href="#registration-endpoint" class="toc-h2 toc-link" data-title="Registration Endpoint">Registration Endpoint</a>
                  </li>
                  <li>
                    <a href="#returned-value-success" class="toc-h2 toc-link" data-title="Returned value: success">Returned value: success</a>
                  </li>
                  <li>
                    <a href="#returned-value-with-error" class="toc-h2 toc-link" data-title="Returned value: with error">Returned value: with error</a>
                  </li>
                  <li>
                    <a href="#other-errors" class="toc-h2 toc-link" data-title="Other errors">Other errors</a>
                  </li>
                  <li>
                    <a href="#tokenrefresh-endpoint" class="toc-h2 toc-link" data-title="TokenRefresh Endpoint">TokenRefresh Endpoint</a>
                  </li>
                  <li>
                    <a href="#login-endpoint" class="toc-h2 toc-link" data-title="Login Endpoint">Login Endpoint</a>
                  </li>
                  <li>
                    <a href="#invoice-endpoint" class="toc-h2 toc-link" data-title="Invoice Endpoint">Invoice Endpoint</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#errors" class="toc-h1 toc-link" data-title="Errors">Errors</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#time-out-error-code-504" class="toc-h2 toc-link" data-title="Time-out (error code 504)">Time-out (error code 504)</a>
                  </li>
                  <li>
                    <a href="#the-sad-kitten-failure-to-scan" class="toc-h2 toc-link" data-title="The sad kitten (failure to scan)">The sad kitten (failure to scan)</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#other-errors" class="toc-h1 toc-link" data-title="Other Errors">Other Errors</a>
          </li>
      </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='introduction'>Introduction</h1><h3 id='what-is-this-api-for'>What is this API for?</h3>
<p>Scanning invoices and extracting data! Just send up an invoice, and we will return a JSON of the document including as much data as we could extract, along with details of where that information was on the page, and a new tagged image of the document. </p>

<p>This API is optimized for computer generated PDFs, which will have the best performance. However, pdf scans, png and high resolution jpg are also supported. Currently the API is set with a 60 second time out, which will be extended shortly.</p>

<p>The API is load balanced, and should be able to handle a significant number of requests in parallel, but, as we are in Beta, we appreciate your patience with any issues that may occur regarding dropped responses.</p>

<p>Staple AI reserves the right to make changes to the API, including registration process, access and response values at any time. That means that the returned values you see now are not fixed, and may be subject to change.   </p>
<h3 id='free-demo'>Free Demo</h3>
<p>See our <a href="https://demo.staple.io/">demo</a> if you wish to sample the invoice scanning using a simple drag and drop interface without using the API.</p>
<h3 id='in-the-future'>In the future</h3>
<p>Please expect the API to change and improve over the coming weeks and months are we refine our data extraction abilities. Dictionaries keys of retruned JOSN will not be removed, however new ones may be added, and our accuracy will be improving consistently.</p>

<p>We will be optimising our data extraction techniques, and allowing receipts, purchase orders and delivery notes. Each of these will have a seperate optimized endpoint, however we are also adding a generic endpoint that will both classify and scan the document (just incase you don&#39;t want to have to presort documents before sending them).</p>
<h1 id='usage'>Usage</h1>
<p>The API is currently <strong>FREE</strong> to use while in Beta - provided different users register new accounts (see below). Free access it limited to 1,000 calls, but may be extended on request by contacting <a href="mailto:josh@staple.io">josh@staple.io</a>. Feel free to spread this document to other parties you may feel would be interested. In short - go nuts.</p>
<h2 id='python-examples-for-api-usage'>Python Examples for API usage</h2>
<p>The following is example code to use the API using python. The API is designed to return data to the user in a convienient manner to be used within existing software builds.</p>
<h2 id='registration-endpoint'>Registration Endpoint</h2>
<p>New users are required to register for the API. Simply decide on a username and password and you will be given two (2) tokens: an access token and refresh token.</p>
<pre class="highlight python tab-python"><code><span class="c"># To POST</span>
<span class="c"># import required packages</span>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">import</span> <span class="nn">pprint</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="c"># define the url</span>
<span class="n">registration_url</span> <span class="o">=</span> <span class="s">'http://scanning.staple.io/registration'</span>

<span class="c"># define the headers</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">'Content-Type'</span><span class="p">:</span> <span class="s">'application/json'</span>
<span class="p">}</span>

<span class="c"># define the payload - with chosen username and password</span>
<span class="c"># these should be lowercase</span>
<span class="n">payload</span> <span class="o">=</span> <span class="p">{</span>
  <span class="err">“</span><span class="n">username</span><span class="err">”</span><span class="p">:</span> <span class="err">“</span><span class="n">mynewusername</span><span class="err">”</span><span class="p">,</span>
  <span class="err">“</span><span class="n">password</span><span class="err">”</span><span class="p">:</span> <span class="err">“</span><span class="n">mysupersecretpassword</span><span class="err">”</span>
<span class="p">}</span>

<span class="c"># call the API and print the response</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="s">'POST'</span><span class="p">,</span> <span class="n">registration_url</span><span class="p">,</span> <span class="n">json</span> <span class="o">=</span> <span class="n">payload</span><span class="p">,</span> <span class="n">allow_redirects</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="n">pprint</span><span class="o">.</span><span class="n">pprint</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">text</span><span class="p">))</span>
</code></pre><h2 id='returned-value-success'>Returned value: success</h2>
<p>If the post is successful, the access token and refresh tokens will be returned as a string. Save these for use later.
<code>JSON
{&quot;message&quot;: &quot;user mynewusername was created&quot;, &quot;access_token&quot;: &quot;***********&quot;, &quot;refresh_token&quot;: &quot;*******&quot;}
</code></p>
<h2 id='returned-value-with-error'>Returned value: with error</h2>
<p>Username already exists. For example:
<code>JSON
{&quot;message&quot;: &quot;user mynewusername already exists&quot;}
</code></p>
<h2 id='other-errors'>Other errors</h2>
<p>API call was made incorrectly.</p>
<h2 id='tokenrefresh-endpoint'>TokenRefresh Endpoint</h2>
<p>Access tokens are only valid for a period of time (currently set to 1 week). However, using your refresh token you may retrieve a new access token for use.</p>
<pre class="highlight python tab-python"><code><span class="c"># define the URL</span>
<span class="n">refresh_url</span> <span class="o">=</span> <span class="s">'http://scanning.staple.io/token/refresh'</span>

<span class="c"># define the empty payload</span>
<span class="n">payload</span> <span class="o">=</span> <span class="p">{}</span>

<span class="c"># define the headers</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">'Authorization'</span> <span class="p">:</span> <span class="s">'Bearer '</span> <span class="o">+</span> <span class="n">refresh_token</span>
<span class="p">}</span>

<span class="c"># call the API and print the response</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="s">'POST'</span><span class="p">,</span> <span class="n">refresh_url</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">headers</span><span class="p">,</span> <span class="n">json</span> <span class="o">=</span> <span class="n">payload</span><span class="p">,</span> <span class="n">allow_redirects</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="n">pprint</span><span class="o">.</span><span class="n">pprint</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">text</span><span class="p">))</span>
</code></pre><h3 id='responses'>Responses:</h3>
<p>In the case that the post is successful, you will be given a new access token. Use it wisely.
<code>JSON
{&quot;access_token&quot;: &quot;*******************&quot;}
</code></p>
<h2 id='login-endpoint'>Login Endpoint</h2>
<p>If you have forgotten/lost your refresh and/opr access token, then retrieve them using the login endpoint.</p>
<pre class="highlight python tab-python"><code><span class="c"># define the URL</span>
<span class="n">login_url</span> <span class="o">=</span> <span class="s">'http://scanning.staple.io/login'</span>

<span class="c"># define the payload</span>
<span class="n">payload</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'username'</span><span class="p">:</span> <span class="err">“</span><span class="n">mynewusername</span><span class="err">”</span><span class="p">,</span>
     <span class="s">'password'</span><span class="p">:</span> <span class="err">“</span><span class="n">mysupersecretpassword</span><span class="err">”</span>
<span class="p">}</span>

<span class="c"># define the header</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'Content-Type'</span><span class="p">:</span> <span class="s">'application/json'</span>
 <span class="p">}</span>

<span class="c"># Call the API and print the response</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="s">'POST'</span><span class="p">,</span> <span class="n">login_url</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">headers</span><span class="p">,</span> <span class="n">json</span> <span class="o">=</span> <span class="n">payload</span><span class="p">,</span> <span class="n">allow_redirects</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>

<span class="n">pprint</span><span class="o">.</span><span class="n">pprint</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
</code></pre><h3 id='responses-2'>Responses:</h3>
<p>If the user name already exists then you will recieve the following response
<code>JSON
{&quot;message&quot;: &quot;logged in as mynewusername&quot;, &quot;access_token&quot;: &quot;***************&quot;, &quot;Refresh_token&quot;: &quot;*****************&quot;}
</code></p>
<h2 id='invoice-endpoint'>Invoice Endpoint</h2>
<p>Once you have a valid access token (either from registration, login or refresh), you may now call the API.</p>

<p>The input should be either a pdf, png or jpg. Please bear in mind multipay pdfs and larger png images will take longer to process. Files which are too large will currently cause a system error (sad kitten section).</p>
<pre class="highlight python tab-python"><code><span class="c"># define the endpoint</span>

<span class="n">invoice_url</span> <span class="o">=</span> <span class="s">'http://scanning.staple.io/invoice'</span>

<span class="c"># define the file you wish the send</span>
<span class="n">invoice_file_name</span> <span class="o">=</span> <span class="err">‘</span><span class="n">myexampletestinvoice</span><span class="o">.</span><span class="n">pdf</span><span class="err">’</span>
<span class="n">files</span> <span class="o">=</span> <span class="p">{</span><span class="s">'file'</span><span class="p">:</span> <span class="nb">open</span><span class="p">(</span><span class="n">invoice_file_name</span><span class="p">,</span><span class="s">'rb'</span><span class="p">)}</span>

<span class="c"># define the headers - this should include a valid access token</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">'Authorization'</span><span class="p">:</span> <span class="s">'Bearer '</span> <span class="o">+</span> <span class="n">access_token</span>
<span class="p">}</span>

<span class="c"># call the API and print the response - this may take up 1 minute depending on the</span>

<span class="c"># document size and complexity</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="s">'POST'</span><span class="p">,</span> <span class="n">invoice_url</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">header</span><span class="p">,</span> <span class="n">files</span> <span class="o">=</span> <span class="n">files</span><span class="p">,</span> <span class="n">allow_redirects</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>

<span class="c"># print the response</span>
<span class="n">pprint</span><span class="o">.</span><span class="n">pprint</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">text</span><span class="p">))</span>

<span class="c"># remove some prepended data from the base64 before conversion</span>
<span class="n">Tagged_image</span> <span class="o">=</span> <span class="n">invoice_data</span><span class="p">[</span><span class="s">'base64'</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">'data:image/png;base64,'</span><span class="p">,</span><span class="s">''</span><span class="p">)</span>

<span class="c"># remove image from dict before printing</span>
<span class="n">Invoice_data</span><span class="p">[</span><span class="s">'base64'</span><span class="p">]</span> <span class="o">=</span> <span class="bp">None</span>

<span class="c"># print the response</span>
<span class="n">pprint</span><span class="o">.</span><span class="n">pprint</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">text</span><span class="p">))</span>

<span class="c"># convert the base64 section into a png and save it</span>
<span class="kn">import</span> <span class="nn">base64</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s">"imageToSave.png"</span><span class="p">,</span> <span class="s">"wb"</span><span class="p">)</span> <span class="k">as</span> <span class="n">fh</span><span class="p">:</span>
    <span class="n">image_64_decode</span> <span class="o">=</span> <span class="n">base64</span><span class="o">.</span><span class="n">b64decode</span><span class="p">(</span><span class="n">Tagged_image</span><span class="p">)</span>
    <span class="n">fh</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">image_64_decode</span><span class="p">)</span>
</code></pre>
<p>Returned values: this contains all of the data extracted from the invoice. Also tables are represented in 2 formats - standardised header and original headers.</p>
<pre class="highlight plaintext"><code>{
    "Type": "Invoice",
    "Client": null,
    "table_detected": true,
    "Invoice number": "42245626",
    "PO number": "PORUK-08237",
    "Invoice date": "08/14/2018",
    "Other date": "08/03/2018",
    "Account number": "270-519912-270",
    "Swift code": "HFU9CATT",
    "Total": 171.5,
    "Tax total": 0,
    "Currency": [
        "GBP",
        "GBP"
    ],
    "LineItems": [
        {
            "item ": [
                "20"
            ],
            "Material ": [
                "1C-ACC6-ENT",
                "ACC 6 ENT, 1 Cameras"
            ],
            "Quantity ": [
                "1 EA"
            ],
            "Price ": [
                "171.50"
            ],
            "Amount ": [
                "171.50"
            ]
        }
    ],
    "LineItems_standardHeader": [
        {
            "Other0": "20",
            "Description": "1C-ACC6-ENT ACC 6 ENT, 1 Cameras",
            "Quantity": 1,
            "UnitAmount": 171.5,
            "LineAmount": 171.5
        }
    ],
    "Billing address": "Company \n Staple. \n 8 32 Carpenter St \n Singapore",
    "Shipping address": "Windmill Antiques \n BroadEye Hill \n Staffordshire \n England, \n UNITED KINGDOM",
    "Company name": " Staple ",
    "Sender address": " Box 389 \n 101 \n 1001 West Broadway \n Calgary, AB, P6J 4E4 \n Canada \n ",
    "Other address": "Generic Corporation Canada",
    "base64": "VERYLONGSTRINGHERE"
}
</code></pre>
<p>Here the Base64 image encoding field has been omitted. This is a very long  string - so it may be worth removing this value from the string before printing as in the example.</p>
<h1 id='errors'>Errors</h1><h2 id='time-out-error-code-504'>Time-out (error code 504)</h2>
<p>Such an error indicated the API did not complete its Scan in the 60 second connection window - and may likely occur in the case of multipage documents. This time window is in process of being extended.</p>
<h2 id='the-sad-kitten-failure-to-scan'>The sad kitten (failure to scan)</h2>
<blockquote>
<p>The returned JSON for a sad kitten error is:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Internal processing error"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"log"</span><span class="p">:</span><span class="w"> </span><span class="s2">"We could not process this document."</span><span class="p">,</span><span class="w">
    </span><span class="s2">"advice"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Try a different pdf."</span><span class="p">,</span><span class="w">
    </span><span class="s2">"moreAdvice"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Ensure you have uploaded an invoice."</span><span class="p">,</span><span class="w">
    </span><span class="s2">"base64"</span><span class="p">:</span><span class="w"> </span><span class="s2">"base64_encoding_of_sad_kitten_image"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<blockquote>
<p>The image may be represented back as a png if you really want to see the kitten.</p>
</blockquote>

<aside class="warning">Seeing the sad kitten is always a bad thing. It means that we were unable to interpret the data on your document. </aside>

<p>The sad kitten means that our API could not process the document you posted, in which case a base 64 image of a very sad kitten is returned.</p>

<p>The image may be represented back as a png if you really want to see the kitten.</p>
<pre class="highlight python tab-python"><code><span class="c"># remove some prepended data from the base64 before conversion</span>
<span class="n">Tagged_image</span> <span class="o">=</span> <span class="n">invoice_data</span><span class="p">[</span><span class="s">'base64'</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">'data:image/png;base64,'</span><span class="p">,</span><span class="s">''</span><span class="p">)</span>

<span class="c"># remove image from dict before printing</span>
<span class="n">Invoice_data</span><span class="p">[</span><span class="s">'base64'</span><span class="p">]</span> <span class="o">=</span> <span class="bp">None</span>

<span class="c"># print the response</span>
<span class="n">pprint</span><span class="o">.</span><span class="n">pprint</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">text</span><span class="p">))</span>

<span class="c"># convert the base64 section into a png and save it</span>
<span class="kn">import</span> <span class="nn">base64</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s">"verysadkittenimage.png"</span><span class="p">,</span> <span class="s">"wb"</span><span class="p">)</span> <span class="k">as</span> <span class="n">fh</span><span class="p">:</span>
    <span class="n">image_64_decode</span> <span class="o">=</span> <span class="n">base64</span><span class="o">.</span><span class="n">b64decode</span><span class="p">(</span><span class="n">Tagged_image</span><span class="p">)</span>
    <span class="n">fh</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">image_64_decode</span><span class="p">)</span>

</code></pre>
<p>Although logs are created internally when sad kitten errors occur - we would appreciate if API users would send the offending documents to <a href="mailto:josh@staple.io">josh@staple.io</a>, so we can ensure this error does not happen again. We never want to see the sad kitten and neither do you :(.</p>
<h1 id='other-errors'>Other Errors</h1>
<aside class="notice">
This error section is stored in a separate file in <code>includes/_errors.md</code>. Slate allows you to optionally separate out your docs into many files...just save them to the <code>includes</code> folder and add them to the top of your <code>index.md</code>'s frontmatter. Files are included in the order listed.
</aside>

<p>The Staple API uses the following error codes:</p>

<table><thead>
<tr>
<th>Error Code</th>
<th>Meaning</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>Bad Request -- Your request is invalid.</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized -- Your API key is wrong.</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden -- The information requested is hidden for administrators only.</td>
</tr>
<tr>
<td>404</td>
<td>Not Found -- The specified data could not be found.</td>
</tr>
<tr>
<td>405</td>
<td>Method Not Allowed -- You tried to access data with an invalid method.</td>
</tr>
<tr>
<td>410</td>
<td>Gone -- The data requested has been removed from our servers.</td>
</tr>
<tr>
<td>429</td>
<td>Too Many Requests -- You&#39;re requesting data from too many documents! Slow down!</td>
</tr>
<tr>
<td>500</td>
<td>Internal Server Error -- We had a problem with our server. Try again later.</td>
</tr>
<tr>
<td>503</td>
<td>Service Unavailable -- We&#39;re temporarily offline for maintenance. Please try again later.</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="shell">shell</a>
                <a href="#" data-language-name="python">python</a>
                <a href="#" data-language-name="javascript">javascript</a>
          </div>
      </div>
    </div>
  </body>
</html>
